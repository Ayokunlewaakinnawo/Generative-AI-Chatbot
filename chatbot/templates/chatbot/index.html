<!DOCTYPE html>

<html data-wf-page="643a39615283b65a933e772e" data-wf-site="643a39615283b66f233e772d">
    {% load static %}
    <head>
        <meta charset="utf-8"/>
        <title>
            Generative AI CHATbOT!
        </title>
        <meta content="width=device-width, initial-scale=1" name="viewport"/>
        <meta content="Webflow" name="generator"/>
        <link href="{% static 'chatbot/css/normalize.css' %}" rel="stylesheet" type="text/css"/>
        <link href="{% static 'chatbot/css/webflow.css' %}" rel="stylesheet" type="text/css"/>
        <link href="{% static 'chatbot/css/elements-webflow-library-site-7cbf3f.webflow.css' %}" rel="stylesheet" type="text/css"/>
        <link href="https://fonts.googleapis.com" rel="preconnect"/>
        <link crossorigin="anonymous" href="https://fonts.gstatic.com" rel="preconnect"/>
        <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript">
        </script>
        <script type="text/javascript">
            WebFont.load({  google: {    families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic","Inconsolata:400,700"]  }});
        </script>
        <script type="text/javascript">
            !function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);
        </script>
        <link href="{% static 'chatbot/images/favicon.png' %}" rel="shortcut icon" type="image/x-icon"/>
        <link href="{% static 'chatbot/images/webclip.png' %}" rel="apple-touch-icon"/>
    </head>
    <body class="body" data-w-id="643a39615283b645253e772f" style="background-color:rgb(255,255,255);color:rgb(0,0,0)">
        <div class="navbar-no-shadow">
            <div class="navbar-no-shadow-container w-nav" data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner">
                <div class="container-regular">
                    <div class="navbar-wrapper">
                        <nav class="nav-menu-wrapper w-nav-menu" role="navigation">
                            <ul class="nav-menu w-list-unstyled" role="list">
                                <li class="mobile-margin-top-10">
                                    <a class="button-primary-2 w-button" href="#">
                                        GeNERATIVE AI CHATBOT
                                    </a>
                                    <div class="text-block-60">
                                        Powered by GPT 3.5 Turbo
                                    </div>
                                </li>
                            </ul>
                        </nav>
                        <div class="menu-button-2 w-nav-button">
                            <div class="w-icon-nav-menu">
                            </div>
                        </div>
                        <div class="w-form">
                            <form class="sysf-form-4" data-name="Switch Form" data-wf-element-id="b0c0bbf6-64cc-4f65-1b58-a3faa882fb72" data-wf-page-id="643a39615283b65a933e772e" id="wf-form-Switch-Form" method="get" name="wf-form-Switch-Form">
                                {% csrf_token %}
                                <label class="w-checkbox sysf-switch-field-2">
                                    <div class="w-checkbox-input w-checkbox-input--inputType-custom sysf-switch-3" data-w-id="b0c0bbf6-64cc-4f65-1b58-a3faa882fb74">
                                    </div>
                                    <input data-name="Switch 2" id="Switch-2" name="Switch-2" style="opacity:0;position:absolute;z-index:-1" type="checkbox"/>
                                    <span class="sysf-switch-label-3 w-form-label" for="Switch-2">
                                        Dark mode
                                    </span>
                                </label>
                            </form>
                            <div class="w-form-done">
                                <div>
                                    Thank you! Your submission has been received!
                                </div>
                            </div>
                            <div class="w-form-fail">
                                <div>
                                    Oops! Something went wrong while submitting the form.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--CHATBOT AnD USER CONVERSION line-->
        <div class="w-layout-blockcontainer container-6 w-container" id="conversation">
            <div class="ai_response">
                <div class="div-block-146">
                    <img alt="" class="sysf-avatar-2 sysf-default" data-w-id="f82e5eb0-7a28-a5ae-949e-1276bfe09e21" height="44" loading="lazy" src="{% static 'chatbot/images/8a06a05f2273dc136c10d5136cddc8b7-ezgif.com-resize.gif' %}" width="44"/>
                    <div>
                        <div class="text-block-61">
                            GEN AI CHATBOT:
                        </div>
                    </div>
                </div>
                <div class="text-block-62-copy">
                    Hello there! i am the new gen ai, How can I assist you today?
                </div>
            </div>
        </div>


<!--===================+MAIN INPUT PROMPT=====================+-->
        <div class="w-layout-blockcontainer container-5 w-container">
            <div>
                <div class="w-form">
                    <div class="sysf-input-with-label-2">
                        <input autofocus="true" class="sysf-input-4 sysf-medium w-input" data-name="Input" id="message" maxlength="256" name="input" placeholder="Type your message" required="" type="text"/>
                        
                        <div class="div-block-144" style="filter:invert(0%)">
                            <button class="sysf-button-4 sysf-medium w-inline-block" id="sendMessage" onclick="sendMessage()">
                                <div class="sysf-button-text-3">
                                    Send
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=643a39615283b66f233e772d" type="text/javascript">
        </script>
        <script src="{% static 'chatbot/js/webflow.js' %}" type="text/javascript">
        </script>
        <!--======MAIN-SCRPT=========-->
        <script>
            document.getElementById("message").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                sendMessage();
            }
        });
    
        function sendMessage() {
            var message = document.getElementById('message').value;
            appendUserPrompt('' + message); // Append user prompt in the desired format
            document.getElementById('message').value = '';
    
            // Send message to AI and get response
            fetch('{% url "get_response" %}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'X-CSRFToken': getCookie('csrftoken'),
                    'X-Requested-With':'XMLHttpRequest'
                },
                body: 'user_input=' + encodeURIComponent(message)
            })
            .then(response => response.json())
            .then(data => {
                // Append AI's response to conversation
                appendAiResponse(data.response);
            })
            .catch(error => console.error('Error:', error));
        }
    
        function appendUserPrompt(content) {
            var conversation = document.getElementById('conversation');
            var userPromptElement = document.createElement('div');
            userPromptElement.className = 'user_prompt message'; // Add user_prompt class
            userPromptElement.innerHTML = `
            <div class="user_prompt">
                    <div class="div-block-146-copy">
                        <img alt="" class="sysf-avatar-2-copy sysf-default-copy" height="44" loading="lazy" src="https://uploads-ssl.webflow.com/641b5e72069a0f21c5ff410f/65e94e14aaf023dae3e11748_Avatar%20Placeholder.svg" style="filter:invert(0%)" width="44"/>
                        <div>
                            <div class="text-block-61-copy" style="color:rgb(0,0,0)">
                                YOU:
                            </div>
                        </div>
                    </div>
                    <div class="text-block-62">
                        ${content}
                    </div>
                </div>`;
            conversation.appendChild(userPromptElement);
            conversation.scrollTop = conversation.scrollHeight;
        }
    
        function appendAiResponse(response) {
            var conversation = document.getElementById('conversation');
            var aiResponseElement = document.createElement('div');
            aiResponseElement.className = 'ai_response message'; // Add ai_response class
            aiResponseElement.innerHTML = `
            <div class="ai_response">
                    <div class="div-block-146">
                        <img alt="" class="sysf-avatar-2 sysf-default" data-w-id="f82e5eb0-7a28-a5ae-949e-1276bfe09e21" height="44" loading="lazy" src="{% static 'chatbot/images/8a06a05f2273dc136c10d5136cddc8b7-ezgif.com-resize.gif' %}" width="44"/>
                        <div>
                            <div class="text-block-61">
                                GEN AI CHATBOT:
                            </div>
                        </div>
                    </div>
                    <div class="text-block-62-copy">
                        ${response}
                    </div>
                </div>`;
            conversation.appendChild(aiResponseElement);
            conversation.scrollTop = conversation.scrollHeight;
        }
    
            function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    var cookies = document.cookie.split(';');
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = cookies[i].trim();
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }
        </script>
    </body>
</html>
